# Debugging

## Running arbitrary scripts

Useful for running small changes that you want to run with your miniruby or
whatever, without having to write an actual test. This is also tied into the
debuggers and stuff.

Make sure that a `test.rb` file exists inside your `ruby` checkout directory and
then after you've build.

- `make run` runs `test.rb` with your compiled `miniruby`
- `make runruby` runs `test.rb` with your compilied `ruby`

## Running code inside a debugger

You can run your `test.rb` with inside `lldb`. This will dump you inside an
`lldb` repl. If you want to integrate this with the VSCode debugger see
[[setting-up-vscode-for-mri]].

- To run `lldb` against `miniruby` using `test.rb` use

```
make lldb
```

- To run `lldb` against `ruby` using `test.rb` use

```
make lldb-ruby
```

## Running a specific test and attaching `lldb`

You can add `RUNRUBYOPT` to any test run command (see [[running-tests]]). An
example:

```bash
make test-all TESTS='test/ruby/test_gc_compact.rb -n test_complex_hash_keys' RUNRUBYOPT=--debugger=lldb
```

Then when you get the `lldb` prompt type `process launch` or `run` to start debugging

also see [[lldb-tips]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[setting-up-vscode-for-mri]: setting-up-vscode-for-mri "Setting up VSCode for MRI development"
[running-tests]: running-tests "Running Tests"
[lldb-tips]: lldb-tips "Lldb Tips"
[//end]: # "Autogenerated link references"